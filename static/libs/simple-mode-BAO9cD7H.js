function simpleMode(n){ensureState(n,"start");var t={},e=n.languageData||{},a=!1;for(var r in n)if(r!=e&&n.hasOwnProperty(r))for(var i=t[r]=[],o=n[r],s=0;s<o.length;s++){var u=o[s];i.push(new Rule(u,n)),(u.indent||u.dedent)&&(a=!0)}return{name:e.name,startState:function(){return{state:"start",pending:null,indent:a?[]:null}},copyState:function(n){var t={state:n.state,pending:n.pending,indent:n.indent&&n.indent.slice(0)};return n.stack&&(t.stack=n.stack.slice(0)),t},token:tokenFunction(t),indent:indentFunction(t,e),mergeTokens:e.mergeTokens,languageData:e}}function ensureState(n,t){if(!n.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function toRegex(n,t){if(!n)return/(?:)/;var e="";return n instanceof RegExp?(n.ignoreCase&&(e="i"),n=n.source):n=String(n),new RegExp("^(?:"+n+")",e)}function asToken(n){if(!n)return null;if(n.apply)return n;if("string"==typeof n)return n.replace(/\./g," ");for(var t=[],e=0;e<n.length;e++)t.push(n[e]&&n[e].replace(/\./g," "));return t}function Rule(n,t){(n.next||n.push)&&ensureState(t,n.next||n.push),this.regex=toRegex(n.regex),this.token=asToken(n.token),this.data=n}function tokenFunction(n){return function(t,e){if(e.pending){var a=e.pending.shift();return 0==e.pending.length&&(e.pending=null),t.pos+=a.text.length,a.token}for(var r=n[e.state],i=0;i<r.length;i++){var o=r[i],s=(!o.data.sol||t.sol())&&t.match(o.regex);if(s){o.data.next?e.state=o.data.next:o.data.push?((e.stack||(e.stack=[])).push(e.state),e.state=o.data.push):o.data.pop&&e.stack&&e.stack.length&&(e.state=e.stack.pop()),o.data.indent&&e.indent.push(t.indentation()+t.indentUnit),o.data.dedent&&e.indent.pop();var u=o.token;if(u&&u.apply&&(u=u(s)),s.length>2&&o.token&&"string"!=typeof o.token){e.pending=[];for(var d=2;d<s.length;d++)s[d]&&e.pending.push({text:s[d],token:o.token[d-1]});return t.backUp(s[0].length-(s[1]?s[1].length:0)),u[0]}return u&&u.join?u[0]:u}}return t.next(),null}}function indentFunction(n,t){return function(e,a){if(null==e.indent||t.dontIndentStates&&t.dontIndentStates.indexOf(e.state)>-1)return null;var r=e.indent.length-1,i=n[e.state];n:for(;;){for(var o=0;o<i.length;o++){var s=i[o];if(s.data.dedent&&!1!==s.data.dedentIfLineStart){var u=s.regex.exec(a);if(u&&u[0]){r--,(s.next||s.push)&&(i=n[s.next||s.push]),a=a.slice(u[0].length);continue n}}}break}return r<0?0:e.indent[r]}}export{simpleMode as s};