import{javascript}from"./javascript-C-Rve0Gm.js";var ATTRS_NEST={"{":"}","(":")","[":"]"};function defaultCopyState(t){if("object"!=typeof t)return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}class State{constructor(t){this.indentUnit=t,this.javaScriptLine=!1,this.javaScriptLineExcludesColon=!1,this.javaScriptArguments=!1,this.javaScriptArgumentsDepth=0,this.isInterpolating=!1,this.interpolationNesting=0,this.jsState=javascript.startState(t),this.restOfLine="",this.isIncludeFiltered=!1,this.isEach=!1,this.lastTag="",this.isAttrs=!1,this.attrsNest=[],this.inAttributeName=!0,this.attributeIsType=!1,this.attrValue="",this.indentOf=1/0,this.indentToken=""}copy(){var t=new State(this.indentUnit);return t.javaScriptLine=this.javaScriptLine,t.javaScriptLineExcludesColon=this.javaScriptLineExcludesColon,t.javaScriptArguments=this.javaScriptArguments,t.javaScriptArgumentsDepth=this.javaScriptArgumentsDepth,t.isInterpolating=this.isInterpolating,t.interpolationNesting=this.interpolationNesting,t.jsState=(javascript.copyState||defaultCopyState)(this.jsState),t.restOfLine=this.restOfLine,t.isIncludeFiltered=this.isIncludeFiltered,t.isEach=this.isEach,t.lastTag=this.lastTag,t.isAttrs=this.isAttrs,t.attrsNest=this.attrsNest.slice(),t.inAttributeName=this.inAttributeName,t.attributeIsType=this.attributeIsType,t.attrValue=this.attrValue,t.indentOf=this.indentOf,t.indentToken=this.indentToken,t}}function javaScript(t,e){if(t.sol()&&(e.javaScriptLine=!1,e.javaScriptLineExcludesColon=!1),e.javaScriptLine){if(e.javaScriptLineExcludesColon&&":"===t.peek())return e.javaScriptLine=!1,void(e.javaScriptLineExcludesColon=!1);var n=javascript.token(t,e.jsState);return t.eol()&&(e.javaScriptLine=!1),n||!0}}function javaScriptArguments(t,e){if(e.javaScriptArguments)return 0===e.javaScriptArgumentsDepth&&"("!==t.peek()?void(e.javaScriptArguments=!1):("("===t.peek()?e.javaScriptArgumentsDepth++:")"===t.peek()&&e.javaScriptArgumentsDepth--,0===e.javaScriptArgumentsDepth?void(e.javaScriptArguments=!1):javascript.token(t,e.jsState)||!0)}function yieldStatement(t){if(t.match(/^yield\b/))return"keyword"}function doctype(t){if(t.match(/^(?:doctype) *([^\n]+)?/))return"meta"}function interpolation(t,e){if(t.match("#{"))return e.isInterpolating=!0,e.interpolationNesting=0,"punctuation"}function interpolationContinued(t,e){if(e.isInterpolating){if("}"===t.peek()){if(e.interpolationNesting--,e.interpolationNesting<0)return t.next(),e.isInterpolating=!1,"punctuation"}else"{"===t.peek()&&e.interpolationNesting++;return javascript.token(t,e.jsState)||!0}}function caseStatement(t,e){if(t.match(/^case\b/))return e.javaScriptLine=!0,"keyword"}function when(t,e){if(t.match(/^when\b/))return e.javaScriptLine=!0,e.javaScriptLineExcludesColon=!0,"keyword"}function defaultStatement(t){if(t.match(/^default\b/))return"keyword"}function extendsStatement(t,e){if(t.match(/^extends?\b/))return e.restOfLine="string","keyword"}function append(t,e){if(t.match(/^append\b/))return e.restOfLine="variable","keyword"}function prepend(t,e){if(t.match(/^prepend\b/))return e.restOfLine="variable","keyword"}function block(t,e){if(t.match(/^block\b *(?:(prepend|append)\b)?/))return e.restOfLine="variable","keyword"}function include(t,e){if(t.match(/^include\b/))return e.restOfLine="string","keyword"}function includeFiltered(t,e){if(t.match(/^include:([a-zA-Z0-9\-]+)/,!1)&&t.match("include"))return e.isIncludeFiltered=!0,"keyword"}function includeFilteredContinued(t,e){if(e.isIncludeFiltered){var n=filter(t,e);return e.isIncludeFiltered=!1,e.restOfLine="string",n}}function mixin(t,e){if(t.match(/^mixin\b/))return e.javaScriptLine=!0,"keyword"}function call(t,e){return t.match(/^\+([-\w]+)/)?(t.match(/^\( *[-\w]+ *=/,!1)||(e.javaScriptArguments=!0,e.javaScriptArgumentsDepth=0),"variable"):t.match("+#{",!1)?(t.next(),e.mixinCallAfter=!0,interpolation(t,e)):void 0}function callArguments(t,e){if(e.mixinCallAfter)return e.mixinCallAfter=!1,t.match(/^\( *[-\w]+ *=/,!1)||(e.javaScriptArguments=!0,e.javaScriptArgumentsDepth=0),!0}function conditional(t,e){if(t.match(/^(if|unless|else if|else)\b/))return e.javaScriptLine=!0,"keyword"}function each(t,e){if(t.match(/^(- *)?(each|for)\b/))return e.isEach=!0,"keyword"}function eachContinued(t,e){if(e.isEach){if(t.match(/^ in\b/))return e.javaScriptLine=!0,e.isEach=!1,"keyword";if(t.sol()||t.eol())e.isEach=!1;else if(t.next()){for(;!t.match(/^ in\b/,!1)&&t.next(););return"variable"}}}function whileStatement(t,e){if(t.match(/^while\b/))return e.javaScriptLine=!0,"keyword"}function tag(t,e){var n;if(n=t.match(/^(\w(?:[-:\w]*\w)?)\/?/))return e.lastTag=n[1].toLowerCase(),"tag"}function filter(t,e){if(t.match(/^:([\w\-]+)/))return setStringMode(t,e),"atom"}function code(t,e){if(t.match(/^(!?=|-)/))return e.javaScriptLine=!0,"punctuation"}function id(t){if(t.match(/^#([\w-]+)/))return"builtin"}function className(t){if(t.match(/^\.([\w-]+)/))return"className"}function attrs(t,e){if("("==t.peek())return t.next(),e.isAttrs=!0,e.attrsNest=[],e.inAttributeName=!0,e.attrValue="",e.attributeIsType=!1,"punctuation"}function attrsContinued(t,e){if(e.isAttrs){if(ATTRS_NEST[t.peek()]&&e.attrsNest.push(ATTRS_NEST[t.peek()]),e.attrsNest[e.attrsNest.length-1]===t.peek())e.attrsNest.pop();else if(t.eat(")"))return e.isAttrs=!1,"punctuation";if(e.inAttributeName&&t.match(/^[^=,\)!]+/))return"="!==t.peek()&&"!"!==t.peek()||(e.inAttributeName=!1,e.jsState=javascript.startState(2),"script"===e.lastTag&&"type"===t.current().trim().toLowerCase()?e.attributeIsType=!0:e.attributeIsType=!1),"attribute";var n=javascript.token(t,e.jsState);if(0===e.attrsNest.length&&("string"===n||"variable"===n||"keyword"===n))try{return Function("","var x "+e.attrValue.replace(/,\s*$/,"").replace(/^!/,"")),e.inAttributeName=!0,e.attrValue="",t.backUp(t.current().length),attrsContinued(t,e)}catch(t){}return e.attrValue+=t.current(),n||!0}}function attributesBlock(t,e){if(t.match(/^&attributes\b/))return e.javaScriptArguments=!0,e.javaScriptArgumentsDepth=0,"keyword"}function indent(t){if(t.sol()&&t.eatSpace())return"indent"}function comment(t,e){if(t.match(/^ *\/\/(-)?([^\n]*)/))return e.indentOf=t.indentation(),e.indentToken="comment","comment"}function colon(t){if(t.match(/^: */))return"colon"}function text(t,e){return t.match(/^(?:\| ?| )([^\n]+)/)?"string":t.match(/^(<[^\n]*)/,!1)?(setStringMode(t,e),t.skipToEnd(),e.indentToken):void 0}function dot(t,e){if(t.eat("."))return setStringMode(t,e),"dot"}function fail(t){return t.next(),null}function setStringMode(t,e){e.indentOf=t.indentation(),e.indentToken="string"}function restOfLine(t,e){if(t.sol()&&(e.restOfLine=""),e.restOfLine){t.skipToEnd();var n=e.restOfLine;return e.restOfLine="",n}}function startState(t){return new State(t)}function copyState(t){return t.copy()}function nextToken(t,e){var n=restOfLine(t,e)||interpolationContinued(t,e)||includeFilteredContinued(t,e)||eachContinued(t,e)||attrsContinued(t,e)||javaScript(t,e)||javaScriptArguments(t,e)||callArguments(t,e)||yieldStatement(t)||doctype(t)||interpolation(t,e)||caseStatement(t,e)||when(t,e)||defaultStatement(t)||extendsStatement(t,e)||append(t,e)||prepend(t,e)||block(t,e)||include(t,e)||includeFiltered(t,e)||mixin(t,e)||call(t,e)||conditional(t,e)||each(t,e)||whileStatement(t,e)||tag(t,e)||filter(t,e)||code(t,e)||id(t)||className(t)||attrs(t,e)||attributesBlock(t,e)||indent(t)||text(t,e)||comment(t,e)||colon(t)||dot(t,e)||fail(t);return!0===n?null:n}const pug={startState:startState,copyState:copyState,token:nextToken};export{pug};